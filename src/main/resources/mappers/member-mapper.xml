<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 해당 파일에 모든 쿼리문을 작성 -->
<mapper namespace="memberMapper">
	
	<!-- <resultMap type="kh.study.consupport.common.vo.UsersVO" id="user">
		<id column="USER_ID"		 		property="userId"/>
		<result column="USER_PW" 			property="userPw"/>
		<result column="USER_NAME" 			property="userName"/>
		<result column="USER_ADDR" 			property="userAddr"/>
		<result column="USER_ADDR_DETAIL" 	property="userAddrDetail"/>
		<result column="USER_EMAIL" 		property="userEmail"/>
		<result column="USER_BIRTH" 		property="userBirth"/>
		<result column="USER_TELL" 			property="userTell"/>
		
		<result column="USER_MILEAGE" 		property="userMileage"/>
		<result column="USER_ROLE" 			property="userRole"/>
		<result column="USER_STATUS" 		property="userStatus"/>
	</resultMap>

	<resultMap type="kh.study.consupport.common.vo.ArtistImgVO" id="artistImg">
		<id column="ARTIST_IMG_CODE"		 		property="artistImgCode"/>
		<result column="ARTIST_IMG_NAME_ORIGIN" 	property="artistImgNameOrigin"/>
		<result column="ARTIST_IMG_NAME_ATTACHED" 	property="artistImgNameAttached"/>
		<result column="ARTIST_IMG_IS_MAIN" 		property="artistImgIsMain"/>
		<result column="USER_ID" 					property="userId"/>
	</resultMap> -->





<!--========================================================================================================================================================================================-->

	<!-- 아티스트 심사 등록 -->
	<insert id="insertArtist">
		INSERT INTO ARTIST (
			USER_ID
			, ARTIST_NAME
			, ARTIST_DETAIL
		) VALUES (
			#{userId}
			, #{artistName}
			, #{artistDetail}
		)
	</insert>
	
	<!-- 아티스트 심사 이미지 등록 -->
	<insert id="insertArtistImgs">
		INSERT INTO ARTIST_IMG (
			ARTIST_IMG_CODE
			, ARTIST_IMG_NAME_ORIGIN
			, ARTIST_IMG_NAME_ATTACHED
			, ARTIST_IMG_IS_MAIN
			, USER_ID
		) 
		<foreach collection="artistImgList" item="artistImg" separator="UNION ALL" index="i">
		SELECT (SELECT 'A_IMG_'||LPAD(NVL(MAX(TO_NUMBER(SUBSTR(ARTIST_IMG_CODE, 7))), 0) + 1 + #{i}, 6, 0) 
	         	FROM ARTIST_IMG)
			, #{artistImg.artistImgNameOrigin}
			, #{artistImg.artistImgNameAttached}
			, #{artistImg.artistImgIsMain}
			, #{userId}
		FROM DUAL
		</foreach>
	</insert>
	
	
<!--========================================================================================================================================================================================-->

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
</mapper>
